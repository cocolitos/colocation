{"ast":null,"code":"var _jsxFileName = \"/media/colin/Documents/Epitech/colocation/src/Login.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { setUserSession } from './Utils/Common';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from \"components/CustomButtons/Button.js\";\nimport { makeStyles } from '@material-ui/core/styles';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  large: {\n    width: theme.spacing(10),\n    height: theme.spacing(10),\n    justifyContent: \"center\",\n    display: \"flex\"\n  }\n}));\n\nfunction Login(props) {\n  const classes = useStyles();\n  const [loginusername, setLoginUsername] = useState('');\n  const [loginpassword, setLoginPassword] = useState('');\n  const [username, setUsername] = useState('');\n  const [name, setName] = useState('');\n  const [surname, setSurname] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false); // handle button click of login form\n\n  const handleLogin = event => {\n    event.preventDefault();\n    setError(null);\n    setLoading(true);\n    axios.post('localhost:9000/users/login', {\n      username: loginusername,\n      password: loginpassword\n    }).then(response => {\n      console.log(response);\n      setLoading(false);\n      setUserSession(response.data.accessToken, response.data); //window.location.reload(false);\n      //props.history.push('/dashboard');\n    }).catch(error => {\n      setLoading(false);\n      console.log(\"erreur\");\n      console.log(error);\n      if (error.response && error.response.status === 401) setError(error.response.data.message);else setError(\"Something went wrong. Please try again later.\");\n    });\n  };\n\n  const handleRegister = event => {\n    event.preventDefault();\n    setError(null);\n    setLoading(true);\n    axios.post('localhost:9000/users/register', {\n      username: username,\n      password: password\n    }).then(response => {\n      console.log(response);\n      setLoading(false);\n      setUserSession(response.data.accessToken, response.data);\n      window.location.reload(false); //props.history.push('/dashboard');\n    }).catch(error => {\n      setLoading(false);\n      console.log(error);\n      if (error.response && error.response.status === 401) setError(error.response.data.message);else setError(\"Something went wrong. Please try again later.\");\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.paper,\n    style: {\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"Se connecter\", /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, \"Nom d'utilisateur:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: loginusername,\n    onChange: event => setLoginUsername(event.target.value),\n    placeholder: \"Nom utilisateur\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, \"Mot de passe\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    value: loginpassword,\n    onChange: event => setLoginPassword(event.target.value),\n    placeholder: \"Mot de passe\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, error && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"small\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 31\n    }\n  }, error), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 78\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 88\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, \"Se conecter\"))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.paper,\n    style: {\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, \"S'inscrire\", /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, \"Nom d'utilisateur:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: username,\n    onChange: event => setUsername(event.target.value),\n    placeholder: \"Nom utilisateur\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, \"Prenom:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: surname,\n    onChange: event => setSurname(event.target.value),\n    placeholder: \"Prenom\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, \"Nom:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: name,\n    onChange: event => setName(event.target.value),\n    placeholder: \"Nom\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: email,\n    onChange: event => setEmail(event.target.value),\n    placeholder: \"Email\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, \"Mot de passe\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    value: password,\n    onChange: event => setPassword(event.target.value),\n    placeholder: \"Mot de passe\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, error && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"small\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 31\n    }\n  }, error), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 78\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 88\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }, \"S'enregistrer\"))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }))));\n}\n/*      Login<br /><br />\n      <div>\n        Username<br />\n        <input type=\"text\" {...username} autoComplete=\"new-password\" />\n      </div>\n      <div style={{ marginTop: 10 }}>\n        Password<br />\n        <input type=\"password\" {...password} autoComplete=\"new-password\" />\n      </div>\n      {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\n      <input type=\"button\" value={loading ? 'Loading...' : 'Login'} onClick={handleLogin} disabled={loading} /><br />\n    </div>*/\n\n\nconst useFormInput = initialValue => {\n  const [value, setValue] = useState(initialValue);\n\n  const handleChange = e => {\n    setValue(e.target.value);\n  };\n\n  return {\n    value,\n    onChange: handleChange\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["/media/colin/Documents/Epitech/colocation/src/Login.js"],"names":["React","useState","axios","setUserSession","Grid","Paper","Avatar","Button","makeStyles","useStyles","theme","root","flexGrow","paper","padding","spacing","textAlign","color","palette","text","secondary","large","width","height","justifyContent","display","Login","props","classes","loginusername","setLoginUsername","loginpassword","setLoginPassword","username","setUsername","name","setName","surname","setSurname","email","setEmail","password","setPassword","error","setError","loading","setLoading","handleLogin","event","preventDefault","post","then","response","console","log","data","accessToken","catch","status","message","handleRegister","window","location","reload","target","value","useFormInput","initialValue","setValue","handleChange","e","onChange"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { setUserSession } from './Utils/Common';\n\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from \"components/CustomButtons/Button.js\";\nimport { makeStyles } from '@material-ui/core/styles';\n \nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  large: {\n    width: theme.spacing(10),\n    height: theme.spacing(10),\n    justifyContent: \"center\",\n    display: \"flex\"\n  },\n}));\n\nfunction Login(props) {\n  const classes = useStyles();\n  const [loginusername, setLoginUsername ] = useState('');\n  const [loginpassword, setLoginPassword] = useState('');\n  const [username, setUsername ] = useState('');\n  const [name, setName ] = useState('');\n  const [surname, setSurname ] = useState('');\n  const [email, setEmail ] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n \n  // handle button click of login form\n  const handleLogin = (event) => {\n    event.preventDefault();\n    setError(null);\n    setLoading(true);\n    axios.post('localhost:9000/users/login'  , {username: loginusername, password: loginpassword }).then(response => {\n      console.log(response);\n      setLoading(false);\n      setUserSession(response.data.accessToken, response.data);\n      //window.location.reload(false);\n      //props.history.push('/dashboard');\n    }).catch(error => {\n      setLoading(false);\n      console.log(\"erreur\");\n      console.log(error);\n      if (error.response && error.response.status === 401) setError(error.response.data.message);\n      else setError(\"Something went wrong. Please try again later.\");\n    });\n  }\n\n  const handleRegister = (event) => {\n    event.preventDefault();\n    setError(null);\n    setLoading(true);\n    axios.post('localhost:9000/users/register'  , {username: username, password: password }).then(response => {\n      console.log(response);\n      setLoading(false);\n      setUserSession(response.data.accessToken, response.data);\n      window.location.reload(false);\n      //props.history.push('/dashboard');\n    }).catch(error => {\n      setLoading(false);\n      console.log(error);\n      if (error.response && error.response.status === 401) setError(error.response.data.message);\n      else setError(\"Something went wrong. Please try again later.\");\n    });\n  }\n \n  return (\n    <div>\n      <Grid container spacing={12}>\n        <Grid container spacing={3}>\n          <Grid item xs={3}>\n          </Grid>\n          <Grid item xs={6}>\n            <Paper className={classes.paper} style={{ justifyContent: \"center\"}}>\n              Se connecter\n              <form onSubmit={handleLogin}>\n                <p>Nom d'utilisateur:</p>\n                <input \n                  type=\"text\" \n                  value={loginusername}\n                  onChange={event => setLoginUsername(event.target.value)}\n                  placeholder=\"Nom utilisateur\"\n                  required \n                />\n                <p>Mot de passe</p>\n                <input \n                  type=\"password\" \n                  value={loginpassword}\n                  onChange={event => setLoginPassword(event.target.value)}\n                  placeholder=\"Mot de passe\"\n                />\n                <p>\n                  {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\n                  <Button type=\"submit\" color=\"primary\">\n                    Se conecter\n                  </Button>\n                </p> \n              </form>\n            </Paper>\n          </Grid>\n          <Grid item xs={3}>\n          </Grid>\n        </Grid>\n      </Grid>\n\n      <Grid container spacing={12}>\n        \n        <Grid container spacing={3}>\n          <Grid item xs={3}>\n          </Grid>\n          <Grid item xs={6}>\n            <Paper className={classes.paper} style={{ justifyContent: \"center\"}}>\n              S'inscrire\n              <form onSubmit={handleLogin}>\n                <p>Nom d'utilisateur:</p>\n                <input \n                  type=\"text\" \n                  value={username}\n                  onChange={event => setUsername(event.target.value)}\n                  placeholder=\"Nom utilisateur\"\n                  required \n                />\n                <p>Prenom:</p>\n                <input \n                  type=\"text\" \n                  value={surname}\n                  onChange={event => setSurname(event.target.value)}\n                  placeholder=\"Prenom\"\n                  required \n                />\n                <p>Nom:</p>\n                <input \n                  type=\"text\" \n                  value={name}\n                  onChange={event => setName(event.target.value)}\n                  placeholder=\"Nom\"\n                  required \n                />\n                <p>Email:</p>\n                <input \n                  type=\"text\" \n                  value={email}\n                  onChange={event => setEmail(event.target.value)}\n                  placeholder=\"Email\"\n                  required \n                />\n                <p>Mot de passe</p>\n                <input \n                  type=\"password\" \n                  value={password}\n                  onChange={event => setPassword(event.target.value)}\n                  placeholder=\"Mot de passe\"\n                />\n                <p>\n                  {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\n                  <Button type=\"submit\" color=\"info\">\n                    S'enregistrer\n                  </Button>\n                </p> \n              </form>\n            </Paper>\n          </Grid>\n          <Grid item xs={3}>\n          </Grid>\n        </Grid>\n      </Grid>\n\n    </div>\n  );\n\n\n\n}\n/*      Login<br /><br />\n      <div>\n        Username<br />\n        <input type=\"text\" {...username} autoComplete=\"new-password\" />\n      </div>\n      <div style={{ marginTop: 10 }}>\n        Password<br />\n        <input type=\"password\" {...password} autoComplete=\"new-password\" />\n      </div>\n      {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\n      <input type=\"button\" value={loading ? 'Loading...' : 'Login'} onClick={handleLogin} disabled={loading} /><br />\n    </div>*/\n \nconst useFormInput = initialValue => {\n  const [value, setValue] = useState(initialValue);\n \n  const handleChange = e => {\n    setValue(e.target.value);\n  }\n  return {\n    value,\n    onChange: handleChange\n  }\n}\n \nexport default Login;"]},"metadata":{},"sourceType":"module"}